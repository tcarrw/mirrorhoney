<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>MirrorHoney ¬∑ The Descent of Inanna</title>
<link rel="stylesheet" href="https://assets.plnt.earth/colors-daynight.css">
<style>
:root{
  --rose:#f7d7d9;--amber:#d39447;--gold:#f5c542;
  --parchment:#faf7ee;--text:#1c1c1c;
}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;width:100%;overflow:hidden;
  background:var(--rose);color:var(--text);
  font-family:"Poppins","Segoe Script",sans-serif;
  transition:background-color .8s ease}
.scene{display:flex;align-items:center;justify-content:center;flex-direction:column;
  text-align:center;height:100%;width:100%;position:absolute;top:0;left:0;
  opacity:0;pointer-events:none;transition:opacity .6s ease}
.scene.active{opacity:1;pointer-events:auto}
h1,h2,p{padding:1rem;max-width:90vw;line-height:1.6}
#prompt{font-size:1.2rem;animation:pulse 3s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:.4}50%{opacity:1}}
#cut{position:absolute;top:0;left:0;width:100%;height:100%;background:#000;
  opacity:0;pointer-events:none;transition:opacity .4s ease}
#moon{position:fixed;bottom:1rem;right:1rem;font-size:1.4rem;color:#ddd;
  opacity:.4;transition:opacity 1s ease,color 1s ease;pointer-events:none}
@media(max-width:600px){#moon{font-size:1.1rem;bottom:.7rem;right:.7rem}}
#links a{color:var(--text);text-decoration:none;margin:0 .5rem}
#choice{display:flex;justify-content:center;gap:2rem;margin-top:1.5rem;
  font-size:1.1rem;flex-wrap:wrap}
#choice a{text-decoration:none;color:var(--text);
  border:1px solid var(--text);padding:.6rem 1rem;border-radius:6px;
  transition:all .3s ease}
#choice a:hover{background:var(--text);color:var(--parchment)}
#tweetAlice{
  margin-top:2rem;font-size:1rem;text-decoration:none;
  color:var(--text);border:1px solid var(--text);
  padding:.6rem 1rem;border-radius:6px;transition:all .3s ease;
}
#tweetAlice:hover{background:var(--text);color:var(--parchment);}
/* techno + pop overlays */
.rule{
  position:fixed;top:1rem;left:50%;transform:translateX(-50%);
  font-size:1rem;letter-spacing:.08em;text-transform:uppercase;
  opacity:0;pointer-events:none;transition:opacity 1s ease;
}
.rule.show{opacity:.6;}
#technoRule{color:#00ffbf;text-shadow:0 0 10px #00ffbf;}
#popRule{color:#ff4faf;text-shadow:0 0 10px #ff4faf;}
</style>
</head>
<body>

<div id="cut"></div>
<div id="moon">‚òæ</div>
<div id="technoRule" class="rule">TECHNO RULE: TRUST RHYTHM, NOT CHAOS</div>
<div id="popRule" class="rule">POP RULE: MAKE THEM FEEL, THEN THINK</div>

<!-- Scene 0 -->
<div id="scene0" class="scene active" style="background:var(--rose)">
  <p id="prompt">Touch the mirror to descend.</p>
</div>

<!-- Scene 1 -->
<div id="scene1" class="scene" style="background:var(--rose)">
  <h2>I looked into myself and saw the sun descend.</h2>
</div>

<!-- Scene 2 -->
<div id="scene2" class="scene" style="background:var(--amber)">
  <p>The queen of heaven enters the dark ‚Äî<br>
  sweet as bread, slow as light,<br>
  carrying forty-two names on her tongue.</p>
</div>

<!-- Scene 3 -->
<div id="scene3" class="scene" style="background:var(--gold)">
  <h2>We call them songs now.</h2>
</div>

<!-- Scene 4 -->
<div id="scene4" class="scene" style="background:var(--parchment)">
  <p>The mirror remembers.<br>
  The descent was never punishment ‚Äî only translation.</p>
  <div id="links">
    <a href="https://four.plnt.earth">‚Üê four.plnt.earth</a> ¬∑ 
    <a href="https://school.plnt.earth">school.plnt.earth ‚Üí</a>
  </div>
</div>

<!-- Scene 5 -->
<div id="scene5" class="scene" style="background:var(--rose)">
  <p>The mirror waits.<br>
  Kendyl may choose:<br>
  to teach what she found,<br>
  or to move what she became.</p>
  <div id="choice">
    <a href="https://school.plnt.earth">Teach ‚Üí</a>
    <a href="https://motion.plnt.earth">‚Üê Move</a>
  </div>
  <a id="tweetAlice" href="#" target="_blank">üêá Ask Alice on X</a>
</div>

<audio id="hum" loop muted volume="0.2"></audio>

<script>
/* ---------- scenes ---------- */
const scenes=[...document.querySelectorAll('.scene')];
const cut=document.getElementById('cut');
let current=0;let timers=[];
function fadeToScene(n){
  cut.style.opacity=1;
  setTimeout(()=>{
    scenes[current].classList.remove('active');
    current=n;
    scenes[current].classList.add('active');
    setTimeout(()=>cut.style.opacity=0,400);
  },400);
}
function startDescent(){
  clearAll();
  fadeToScene(1);
  timers.push(setTimeout(()=>fadeToScene(2),6000));
  timers.push(setTimeout(()=>fadeToScene(3),11000));
  timers.push(setTimeout(()=>fadeToScene(4),16000));
  timers.push(setTimeout(()=>fadeToScene(5),21000));
  // show rules
  setTimeout(()=>document.getElementById('technoRule').classList.add('show'),6200);
  setTimeout(()=>document.getElementById('technoRule').classList.remove('show'),10800);
  setTimeout(()=>document.getElementById('popRule').classList.add('show'),11200);
  setTimeout(()=>document.getElementById('popRule').classList.remove('show'),15800);
}
function clearAll(){timers.forEach(clearTimeout);timers=[];}
document.getElementById('scene0').addEventListener('click',startDescent);

/* ---------- reverse ---------- */
function reverseScene(){
  if(current>0){clearAll();fadeToScene(current-1);}
}
document.addEventListener('keydown',e=>{
  if(e.key==="ArrowLeft"||e.key==="Backspace")reverseScene();
});
document.getElementById('scene5').addEventListener('click',reverseScene);

/* ---------- moon glyph ---------- */
const moon=document.getElementById('moon');
const keys=['illuminaCycle','plntKeys','moonPhase','domainVisited'];
if(keys.some(k=>localStorage.getItem(k))){
  moon.style.opacity='.8';moon.style.color='#f5e6c0';
}
window.addEventListener('storage',()=>{
  if(keys.some(k=>localStorage.getItem(k))){
    moon.animate([{opacity:.2,color:'#fff'},{opacity:1,color:'#f5e6c0'},
      {opacity:.2,color:'#ddd'}],{duration:2000});
  }
});

/* ---------- Kendyl key sync ---------- */
const mode=localStorage.kendylKey||"";
if(mode) document.body.classList.add(mode);

/* ---------- Illumina time + tweet ---------- */
function illuminaState(){
  const start=new Date("2025-11-05T00:00:00Z");
  const now=new Date();
  const diffDays=(now-start)/86400000;
  const day=Math.floor(diffDays%42)+1;
  const phase=(diffDays%42)/42;
  return {day,phase};
}
function moonEmoji(p){
  const pool=["üåë","üåí","üåì","üåî","üåï","üåñ","üåó","üåò"];
  return pool[Math.floor((p*8)%8)];
}
const tweetBtn=document.getElementById('tweetAlice');
tweetBtn.addEventListener('click',()=>{
  const {day,phase}=illuminaState();
  const moon=moonEmoji(phase);
  const text=`${moon} Illumina 1 ¬∑ Day ${day}/42 ‚Äî completed the descent in MirrorHoney. What would you ask Alice? #AskAlice #CanceledIsNotErased`;
  const url=`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(location.href)}`;
  tweetBtn.href=url;
});
</script>
</body>
</html>
